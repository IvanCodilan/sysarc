{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
    <link rel="stylesheet" href="{% static 'css/navbar.css' %}">
</head>
<body>
    {% include 'authapp/navbar.html' %}

    <main class="dashboard">
        <div class="card main-dashboard-card">
            <header>
                <h1>Main Dashboard</h1>
                <select id="sortOption">
                    <option value="ascending">Ascending</option>
                    <option value="descending">Descending</option>
                </select>
            </header>

            <div class="grid-container">
                <div class="card">
                    <h2>Population Overview</h2>
                    <canvas id="populationChart" width="400" height="300"></canvas>
                </div>
                <div class="grid-container">
                    <div class="card" data-order="1">Bar Graph</div>
                    <div class="card" data-order="2">Histogram</div>
                    <div class="card" data-order="3">Line Graph</div>
                    <div class="card" data-order="4">Combo Chart</div>
                    <div class="card" data-order="5">Area Graph</div>
                    <div class="card" data-order="6">Bar Graph Table</div>
                
            </div>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script id="population-data" type="application/json">
        {
            "male": {{ male_count|default:0 }},
            "female": {{ female_count|default:0 }},
            "seniors": {{ seniors_count|default:0 }},
            "kids": {{ kids_count|default:0 }}
        }
    </script>
    
    <script>
        const populationData = JSON.parse(document.getElementById('population-data').textContent);
    
        const ctx = document.getElementById('populationChart').getContext('2d');
        const populationChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Male', 'Female', 'Seniors', 'Kids'],
                datasets: [{
                    label: 'Population Count',
                    data: [
                        populationData.male,
                        populationData.female,
                        populationData.seniors,
                        populationData.kids
                    ],
                    backgroundColor: ['#3B82F6', '#EF4444', '#10B981', '#F59E0B'],
                    borderColor: '#ccc',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { display: false },
                    title: {
                        display: true,
                        text: 'Population Overview'
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            precision: 0
                        }
                    }
                }
            }
        });
    </script>
    