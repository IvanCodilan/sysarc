{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Records</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="{% static 'css/records.css' %}">
  <link rel="stylesheet" href="{% static 'css/navbar.css' %}">
</head>
<body>

  {% include 'authapp/navbar.html' %}

<main class="records">
  <div class="records-main-card">
    <h1>Records</h1>
    <button onclick="openAddForm()" class="add-btn">+ Add New Resident</button>
  </div>

  <!-- Add New Resident Form -->
  <div id="addForm" style="display:none; margin-top:20px;">
    <h2>Add New Resident</h2>

    <input type="text" id="first_name" placeholder="First Name">
    <input type="text" id="middle_name" placeholder="Middle Name">
    <input type="text" id="last_name" placeholder="Last Name">
    <input type="date" id="date_of_birth" placeholder="Date of Birth">
    <input type="text" id="place_of_birth" placeholder="Place of Birth">

    <select id="gender">
      <option value="">Select Gender</option>
      <option value="Male">Male</option>
      <option value="Female">Female</option>
      <option value="Other">Other</option>
    </select>

    <select id="civil_status">
      <option value="">Select Civil Status</option>
      <option value="Single">Single</option>
      <option value="Married">Married</option>
      <option value="Separated">Separated</option>
    </select>

    <input type="text" id="occupation" placeholder="Occupation">
    <input type="text" id="citizenship" placeholder="Citizenship">
    <input type="text" id="relationship_to_household_head" placeholder="Relationship to Household Head">

    <select id="educational_background">
      <option value="">Select Educational Background</option>
      <option value="No Formal Education">No Formal Education</option>
      <option value="Elementary Graduate">Elementary Graduate</option>
      <option value="High School Graduate">High School Graduate</option>
      <option value="College Graduate">College Graduate</option>
    </select>

    <input type="text" id="region" placeholder="Region">
    <input type="text" id="province" placeholder="Province">
    <input type="text" id="city" placeholder="City">
    <input type="text" id="barangay" placeholder="Barangay">
    <input type="text" id="street_number" placeholder="Street Number">
    <input type="text" id="street" placeholder="Street">

    <button onclick="submitAddForm()" class="save-btn">Save</button>
    <button onclick="closeAddForm()" class="cancel-btn">Cancel</button>
  </div>

  <!-- Edit Resident Form (Hidden by default) -->
  <div id="editForm" style="display:none; margin-top:20px;">
    <h2>Edit Resident</h2>

    <!-- Same fields as the Add New Resident Form but for editing -->
    <input type="text" id="edit_first_name" placeholder="First Name">
    <input type="text" id="edit_middle_name" placeholder="Middle Name">
    <input type="text" id="edit_last_name" placeholder="Last Name">
    <input type="date" id="edit_date_of_birth" placeholder="Date of Birth">
    <input type="text" id="edit_place_of_birth" placeholder="Place of Birth">

    <select id="edit_gender">
      <option value="">Select Gender</option>
      <option value="Male">Male</option>
      <option value="Female">Female</option>
      <option value="Other">Other</option>
    </select>

    <select id="edit_civil_status">
      <option value="">Select Civil Status</option>
      <option value="Single">Single</option>
      <option value="Married">Married</option>
      <option value="Separated">Separated</option>
    </select>

    <input type="text" id="edit_occupation" placeholder="Occupation">
    <input type="text" id="edit_citizenship" placeholder="Citizenship">
    <input type="text" id="edit_relationship_to_household_head" placeholder="Relationship to Household Head">

    <select id="edit_educational_background">
      <option value="">Select Educational Background</option>
      <option value="No Formal Education">No Formal Education</option>
      <option value="Elementary Graduate">Elementary Graduate</option>
      <option value="High School Graduate">High School Graduate</option>
      <option value="College Graduate">College Graduate</option>
    </select>

    <input type="text" id="edit_region" placeholder="Region">
    <input type="text" id="edit_province" placeholder="Province">
    <input type="text" id="edit_city" placeholder="City">
    <input type="text" id="edit_barangay" placeholder="Barangay">
    <input type="text" id="edit_street_number" placeholder="Street Number">
    <input type="text" id="edit_street" placeholder="Street">

    <button onclick="submitEditForm()" class="save-btn">Save Changes</button>
    <button onclick="closeEditForm()" class="cancel-btn">Cancel</button>
  </div>

  <!-- Resident Table -->
  <div class="records-container">
    <table class="records-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Full Name</th>
          <th>Birthdate</th>
          <th>Gender</th>
          <th>Civil Status</th>
          <th>Occupation</th>
          <th>Citizenship</th>
          <th>Relationship to Household Head</th>
          <th>Educational Background</th>
          <th>Region</th>
          <th>Province</th>
          <th>City</th>
          <th>Barangay</th>
          <th>Street Number</th>
          <th>Street</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="residents-body">
        {% for resident in residents %}
        <tr id="row-{{ resident.id }}">
          <td>{{ forloop.counter }}</td>
          <td>{{ resident.first_name }} {{ resident.middle_name }} {{ resident.last_name }}</td>
          <td>{{ resident.date_of_birth }}</td>
          <td>{{ resident.gender }}</td>
          <td>{{ resident.civil_status }}</td>
          <td>{{ resident.occupation }}</td>
          <td>{{ resident.citizenship }}</td>
          <td>{{ resident.relationship_to_household_head }}</td>
          <td>{{ resident.educational_background }}</td>
          <td>{{ resident.region }}</td>
          <td>{{ resident.province }}</td>
          <td>{{ resident.city }}</td>
          <td>{{ resident.barangay }}</td>
          <td>{{ resident.street_number }}</td>
          <td>{{ resident.street }}</td>
          <td>
            <button onclick="editResident('{{ resident.id }}')" class="edit-btn">Edit</button>
            <button onclick="deleteResident('{{ resident.id }}')" class="delete-btn">Delete</button>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</main>

<script src="{% static 'js/records.js' %}"></script>

</body>
</html>
