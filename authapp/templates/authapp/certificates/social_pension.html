{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Certification - SOCIAL PENSION</title>
  <link rel="stylesheet" href="{% static 'css/officials.css' %}">
  <style>
    @page { 
        size: A4; 
        margin: 0; 
    }

    html, body {
      margin: 0; 
      padding: 0; 
      height: 100%; 
      width: 100%;
      font-family: "Times New Roman", serif;
      -webkit-print-color-adjust: exact !important;
      print-color-adjust: exact !important;
      background: none;
    }

    .certificate-container {
      position: relative;
      width: 210mm; 
      height: 297mm; 
      margin: 0 auto;
      background: url("{% static 'images/design.png' %}") no-repeat center center;
        background-size: 100% 100% !important;
      box-sizing: border-box;
    }

    .text-box {
      position: absolute;
      top: 270px; /* lift content more noticeably */
      right: 70px;
      width: 450px;
      text-align: justify;
      font-size: 19px;
      line-height: 1.6;
      color: #000;
    }

    .title {
      text-align: center; 
      font-weight: bold; 
      letter-spacing: 1px; /* no wide spacing per design */
      font-size: 26px; 
      margin-top: -16px; 
      margin-bottom: 10px; 
      text-transform: uppercase;
    }

    .no-indent { 
        text-indent: 0; 
        font-weight: bold; 
        font-size: 16px; 
        margin: 8px 0 12px; 
    }
    .text-box p {
      margin: 0 0 10px 0;
    }

    .underline { 
        border-bottom: 1px solid #000;
      display: inline-block;
      min-width: 150px;
      line-height: 1;
      padding-bottom: 2px;
      vertical-align: baseline; 
    }
    .underline[contenteditable="true"] { 
      outline: none;
      min-width: 150px;
      display: inline-block;
    }

    .editable-underline {
      display: inline;
      text-decoration: none;
      border-bottom: 1px solid #000;
      line-height: 1.6;
      padding: 0 4px 2px 4px;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .editable-underline:empty::before {
      content: '\200B';
      display: inline-block;
      min-width: 150px;
    }
    

    .cert-number { 
        position: absolute; 
        bottom: 50px; 
        right: 60px; 
        font-size: 14px; 
        font-weight: bold; 
        color: #333; 
    }

    .signature-area { 
        position: absolute; 
        bottom: 90px; 
        right: 90px; 
        text-align: center; 
        font-size: 16px; 
    }
    .signature-name { 
        display: inline-block; 
        min-width: 260px; 
        text-align: center; 
        font-weight: bold; 
        margin-top: 40px; 
    }

    .note { 
        position: absolute; 
        bottom: 30px; 
        left: 50%; 
        transform: translateX(-10%); 
        color: #d00; 
        font-size: 12px; 
        font-weight: bold; 
    }

    .print-controls { 
        position: fixed; 
        top: 15px; 
        right: 15px; 
        z-index: 9999; 
    }
    .print-btn { 
        font-size: 14px; 
        padding: 8px 14px; 
        border: 1px solid #333; 
        background: #fff; 
        cursor: pointer; }
    @media print { .print-controls { 
        display: none; } }
  </style>
</head>
<body>
  <div class="print-controls">
    <button class="print-btn" onclick="window.print()">Print</button>
  </div>
  <div class="certificate-container">
    <div class="punong-barangay-section"><span class="official-name" id="punong-barangay"></span></div>
    <div class="kagawad-section">
      <div class="official-row"><span class="official-name" id="kagawad-1"></span></div>
      <div class="official-row"><span class="official-name" id="kagawad-2"></span></div>
      <div class="official-row"><span class="official-name" id="kagawad-3"></span></div>
      <div class="official-row"><span class="official-name" id="kagawad-4"></span></div>
      <div class="official-row"><span class="official-name" id="kagawad-5"></span></div>
      <div class="official-row"><span class="official-name" id="kagawad-6"></span></div>
      <div class="official-row"><span class="official-name" id="kagawad-7"></span></div>
    </div>
    <div class="secretary-section"><span class="official-name" id="secretary"></span></div>
    <div class="treasurer-section"><span class="official-name" id="treasurer"></span></div>
    <div class="sk-section"><span class="official-name" id="sk-chairperson"></span></div>

    <div class="cert-number">{{ certificate_number }}</div>

    <div class="text-box">
      <div class="title">CERTIFICATE OF INDIGENCY</div>
      <p class="no-indent" style="margin-top:26px;">TO WHOM IT MAY CONCERN:</p>
      <p>
        This is to certify that Mr./Mrs 
        <span class="underline" contenteditable="true" data-field="full_name_inline">{{ full_name }}</span>,
        residing at 
        <span class="underline" contenteditable="true" data-field="address_inline">{{ address }}</span>
        and is a bonafide resident of this Barangay.
      </p>
      <p>
        He/She is a good person of good moral CHARACTER AND A LAW-ABIDING CITIZEN. As per record, no derogatory or criminal
        record has been filed in this Barangay as of this date.
      </p>
      <p>
        This CERTIFICATION is being ISSUED upon the request of above named person for whatever legal purposes it may best serve.
        GIVEN THIS <span class="editable-underline" contenteditable="true"></span> DAY OF <span class="editable-underline" contenteditable="true"></span>,
        <span class="editable-underline" contenteditable="true"></span>
      </p>
      
      <p class="no-indent" style="margin-top:16px;">
        <strong>*NOTE*</strong><br/>
        HE/SHE BELONGS TO ONE OF THE INDIGENT FAMILIES OF THE BARANGAY
      </p>
      <p class="no-indent" style="margin-top:26px;">
        <strong>*PURPOSE*</strong><br/>
        FOR SOCIAL PENSION
      </p>
    </div>

    <div class="signature-area">
      <span class="underline signature-name" id="signature-name"></span>
      <p>PUNONG BARANGAY</p>
    </div>

    <div class="note">NOT VALID WITHOUT BARANGAY DRY SEAL</div>
  </div>
  <script src="{% static 'js/certificate-officials.js' %}"></script>
  <script>
    document.querySelectorAll('[contenteditable][data-field]').forEach(function(el){
      el.addEventListener('keypress', function(e){ if(e.key === 'Enter'){ e.preventDefault(); }});
    });
  </script>
</body>
</html>
