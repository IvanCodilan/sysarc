{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Barangay Certification - Death</title>

  <style>
    @page {
      size: A4;
      margin: 0;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      font-family: "Times New Roman", serif;
      -webkit-print-color-adjust: exact !important;
      print-color-adjust: exact !important;
      background: none;
    }

    .certificate-container {
      width: 210mm;
      height: 297mm;
      padding: 50mm 25mm 25mm;
      margin: 0 auto;
      position: relative;
      background: url("{% static 'images/good_moral_design.png' %}") no-repeat center center;
      background-size: 100% 100%;
      box-sizing: border-box;
    }

    .title {
      text-align: center;
      font-size: 26px;
      font-weight: bold;
      color: red;
      letter-spacing: 8px;
      margin-top: 60px;
      margin-bottom: 40px;
    }

    .content {
      font-size: 18px;
      text-align: justify;
      line-height: 1.6;
    }

    .content p {
      margin-bottom: 18px;
    }

    .editable-underline {
      display: inline;
      text-decoration: none;
      border-bottom: 1px solid #000;
      line-height: 1.6;
      padding: 0 4px 2px 4px;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .editable-underline:empty::before {
      content: '\200B';
      display: inline-block;
      min-width: 150px;
    }

    .underline {
     border-bottom: 1px solid #000;
      min-width: 150px;
      line-height: 1;
      padding-bottom: 2px;
    }

    .signature-area {
      position: absolute;
      bottom: 100px;
      right: 80px;
      text-align: center;
      font-size: 16px;
    }

    .signature-line {
      width: 220px;
      border-top: 1px solid #000;
      margin: 0 auto 5px auto;
    }

    .cert-number {
      position: absolute;
      bottom: 20mm;
      right: 20mm;
      font-size: 14px;
      font-weight: bold;
      color: #333;
    }
    .print-controls {
      position: fixed;
      top: 15px;
      right: 15px;
      z-index: 9999;
    }

    .print-btn {
      font-size: 14px;
      padding: 8px 14px;
      border: 1px solid #333;
      background: #fff;
      cursor: pointer;
    }

    @media print {
      .print-controls { display: none; }
    }
  </style>
</head>
<body>
  <div class="certificate-container">
    <div class="print-controls">
    <button class="print-btn" onclick="window.print()">Print</button>
    </div>
    <div class="cert-number">{{ certificate_number }}</div>

    <div class="title">C E R T I F I C A T I O N</div>

    <div class="content">
      <p><b>TO WHOM IT MAY CONCERN:</b></p>

      <p>
        <b>THIS IS TO CERTIFY</b> that <span class="underline">{{ full_name }}</span>,
        <span class="underline">{{ age }}</span>, <span>{{ citizenship }}</span>, <span>{{ gender }}</span>, <span>{{ civil_status }}</span>, and a resident
        of this barangay has passed away on <span class="editable-underline" contenteditable="true" ></span>
        at <span class="editable-underline" contenteditable="true" ></span>.
      </p>

      <p>
        <b>CERTIFIES FURTHER</b> that the above-named deceased person is personally known
        by the undersigned to be of good moral standing in the community and has been residing
        at this barangay for so many years prior to the demise.
      </p>

      <p>
        <b>THIS CERTIFICATION</b> is being issued to the bereaved family of the above-named
        deceased person for the Registration of Death, Death Benefit Claims, Insurance Claims,
        and other legal purposes this may serve and shall be considered null and void if used
        in any unlawful transactions.
      </p>

      <p>
        GIVEN this <span class="underline">{{ date_today }}</span> at Barangay 570, Zone 56, District IV, Sampaloc, Manila.
      </p>
    </div>

    <div class="signature-area">
      <div class="signature-line"></div>
      <p id="signature-name"></p>
      <p>PUNONG BARANGAY</p>
      <p>Brgy. 570, Zone 56</p>
    </div>
  </div>

  <script src="{% static 'js/certificate-officials.js' %}"></script>
  <script>
    document.querySelectorAll('[contenteditable][data-field]').forEach(function(el){
      el.addEventListener('keypress', function(e){ if(e.key === 'Enter'){ e.preventDefault(); }});
    });
  </script>
</body>
</html>
