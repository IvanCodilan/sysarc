{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Barangay Clearance - Maynilad Leak</title>
  <link rel="stylesheet" href="{% static 'css/officials.css' %}">
  <link rel="stylesheet" href="{% static 'css/navbar.css' %}">
  <style>
    @page {
      size: A4;
      margin: 0;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      font-family: "Times New Roman", serif;
      -webkit-print-color-adjust: exact !important;
      print-color-adjust: exact !important;
      background: none !important;

    }

    .certificate-container {
      position: relative;
      width: 210mm;
      height: 297mm;
      margin: 0 auto;
      background: url("{% static 'images/design.png' %}") no-repeat center center;
      background-size: 100% 100% !important;
      box-sizing: border-box;
    }

    .text-box {
      position: absolute;
      top: 250px;
      right: 50px;
      width: 460px;
      text-align: justify;
      font-size: 15.5px;
      line-height: 1.6;
      color: #000;
      word-spacing: 1px;
    }

    .text-box p {
      text-indent: 50px;
      margin: 0 0 20px 0;
    }

    .text-box p.title {
      text-indent: 0;
      font-weight: bold;
      font-size: 26px;
      text-align: center;
    }

    .text-box p.no-indent {
      text-indent: 0;
      font-weight: bold;
      font-size: 18px;
    }
    
    .editable-underline {
      display: inline;
      text-decoration: none;
      border-bottom: 1px solid #000;
      line-height: 1.6;
      padding: 0 4px 2px 4px;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .editable-underline:empty::before {
      content: '\200B';
      display: inline-block;
      min-width: 150px;
    }
    
    .underline {
      border-bottom: 1px solid #000;
      min-width: 150px;
      line-height: 1;
      padding-bottom: 2px;
    }

    .signature-area {
      position: absolute;
      bottom: 100px;
      right: 80px;
      text-align: center;
      font-size: 16px;
    }

    .signature-line {
      width: 220px;
      border-top: 1px solid #000;
      margin: 0 auto 5px auto;
    }

    .cert-number {
      position: absolute;
      bottom: 50px;
      right: 60px;
      font-size: 14px;
      font-weight: bold;
      color: #333;
    }
    .print-controls {
      position: fixed;
      top: 15px;
      right: 15px;
      z-index: 9999;
    }

    .print-btn {
      font-size: 14px;
      padding: 8px 14px;
      border: 1px solid #333;
      background: #fff;
      cursor: pointer;
    }

    @media print {
      .print-controls { display: none; }
    }
  </style>
</head>
<body>
  <div class="certificate-container">
    
    <!-- Punong Barangay Section -->
    <div class="punong-barangay-section">
      <span class="official-name" id="punong-barangay"></span>
    </div>

    <!-- Kagawads Section -->
    <div class="kagawad-section">
      <div class="official-row"><span class="official-name" id="kagawad-1"></span></div>
      <div class="official-row"><span class="official-name" id="kagawad-2"></span></div>
      <div class="official-row"><span class="official-name" id="kagawad-3"></span></div>
      <div class="official-row"><span class="official-name" id="kagawad-4"></span></div>
      <div class="official-row"><span class="official-name" id="kagawad-5"></span></div>
      <div class="official-row"><span class="official-name" id="kagawad-6"></span></div>
      <div class="official-row"><span class="official-name" id="kagawad-7"></span></div>
    </div>

    <!-- Secretary -->
    <div class="secretary-section">
      <span class="official-name" id="secretary"></span>
    </div>

    <!-- Treasurer -->
    <div class="treasurer-section">
      <span class="official-name" id="treasurer"></span>
    </div>

    <!-- SK Chairperson -->
    <div class="sk-section">
      <span class="official-name" id="sk-chairperson"></span>
    </div>

    <div class="print-controls">
    <button class="print-btn" onclick="window.print()">Print</button>
    </div>
    <div class="cert-number">{{ certificate_number }}</div>

    <!-- Main content -->
    <div class="text-box">
      <p class="title">BARANGAY CLEARANCE</p>
      <p class="no-indent">TO WHOM IT MAY CONCERN:</p>

      <p>
        This Barangay thru the undersigned interprets no objection for the Barangay Permit for the year <span class="underline">2025</span>, MAYNILAD LEAK located at <span class="editable-underline" contenteditable="true" data-field="location"></span> which is within the territorial jurisdiction of Barangay 570, Zone 56, DDistrict IV, Manila.
      </p>

      <p>
        This further certifies that the applicant pledge to abide with the existing laws, ordinance, rules and regulations appertaining to said business activities. Otherwise, this Barangay Clearance orr Certification allowing the abovementioned parrty to operate shall be withdrawn and/or cancelled.
      </p>

      <p>
        Therefore, this Barangay reiterates to interpose no objection for the compliance, as provided or required by Permit Section to issued Barangay Clearance/Certification.
      </p>

      <p>
        This BARANGAY CLEARANCE/CERTIFICATION is being ISSUED for MAYNILAD LEAK PERMIT for the year <span class="underline">2025</span>.
      </p>
      
      <p>Done and Issued this  <span class="underline">{{ date_today }}</span>.</p>
    </div>

    <!-- Signature area -->
    <div class="signature-area">
      <div class="signature-line"></div>
      <p id="signature-name"></p>
      <p>PUNONG BARANGAY</p>
      <p style="color:red; font-size:13px; margin-top:15px;">Not Valid without Barangay Dry Seal</p>
    </div>
  </div>

  <script src="{% static 'js/certificate-officials.js' %}"></script>
  <script>
    document.querySelectorAll('[contenteditable][data-field]').forEach(function(el){
      el.addEventListener('keypress', function(e){ if(e.key === 'Enter'){ e.preventDefault(); }});
    });
  </script>
</body>
</html>
